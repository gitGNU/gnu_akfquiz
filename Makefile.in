# $Id: Makefile.in,v 1.8 2006/11/18 19:21:49 akf Exp $
#
# this Makefile is just a glue to the others
# if you want to configure things, use the script configure 
# and edit the Makefiles in srcbin

VERSION=@VERSION@
SYS=@SYS@
ARCH=@ARCH@

# srcdir is not supported yet
srcdir=@srcdir@

SHELL = /bin/sh

# all for POSIX machines with GTK+ and probably SDL installed
default: all

all:
	$(MAKE) -C srcbin

# just text-oriented programs
most:
	$(MAKE) -C srcbin most

# programs for windows (either native or cross-compilation)
windows:
	$(MAKE) -C srcbin windows

# install for POSIX machines
install:
	$(MAKE) -C srcbin install

# install for POSIX machines
install-strip:
	$(MAKE) -C srcbin install-strip

# install for POSIX machines
installdirs:
	$(MAKE) -C srcbin installdirs

#install-html:

#install-dvi:

#install-pdf:

#install-ps:

# reverse of install 
uninstall:
	$(MAKE) -C srcbin uninstall

# install CGI program
# please make sure the path is correctly set up!
install-cgi:
	$(MAKE) -C srcbin install-cgi

# shouldn't be used
install-quizzes:
	$(MAKE) -C srcbin install-quizzes

doc: FORCE
	$(MAKE) -C doc

#dvi:

html: FORCE
	$(MAKE) -C doc html

txt:
	$(MAKE) -C doc txt

pdf:
	$(MAKE) -C doc pdf

#ps:

clean:
	$(MAKE) -C srcbin clean
	$(MAKE) -C doc clean
	-rm -f *.old
	-rm -f autopackage/*.old

mostlyclean:
	$(MAKE) -C srcbin mostlyclean
	$(MAKE) -C doc mostlyclean

veryclean:
	$(MAKE) -C srcbin veryclean
	$(MAKE) -C doc clean
	-rm -f *.old
	-rm -f autopackage/*.old

distclean:
	$(MAKE) -C srcbin distclean
	$(MAKE) -C doc distclean
	-rm -f Makefile
	-rm -f *.old
	-rm -f autopackage/*.old

maintainer-clean: distclean

new: maintainer-clean

config:
	./configure


# following targets are useful for my system
# they need not fit your needs, so be careful!

pkg: dist

dist: distclean
	env GZIP=--best tar czvCf .. \
	  ../akfquiz-$(VERSION).main.tar.gz \
	      akfquiz/start \
	      akfquiz/configure \
	      akfquiz/Makefile.in \
	      akfquiz/desktop/ \
	      akfquiz/share/akfquiz/Linux-en.akfquiz \
	      akfquiz/share/akfquiz/Linux-de.akfquiz \
	      akfquiz/share/akfquiz/Christentum-de.akfquiz \
	      akfquiz/share/akfquiz/Schokolade-de.akfquiz \
	      akfquiz/share/akfquiz/Landtechnik.akfquiz \
	      akfquiz/doc/ \
	      akfquiz/html/ \
	      akfquiz/srcbin/

dist-bin: all
	env GZIP=--best tar czvCf .. \
	  ../akfquiz-$(VERSION).bin.$(SYS).$(ARCH).tar.gz \
	      akfquiz/start \
	      akfquiz/doc/english/INSTALL \
	      akfquiz/doc/deutsch/INSTALL \
	      akfquiz/doc/COPYING \
	      akfquiz/doc/english/LICENSE.txt \
	      akfquiz/doc/deutsch/LIZENZ.txt \
	      akfquiz/srcbin/mkquiz \
	      akfquiz/srcbin/scrquiz \
	      akfquiz/srcbin/cgiquiz \
	      akfquiz/srcbin/diaquiz \
	      akfquiz/srcbin/linequiz \
	      akfquiz/srcbin/grquiz \
	      akfquiz/srcbin/quizstat \
	      akfquiz/srcbin/akfquiz

dist-mostbin: most
	env GZIP=--best tar czvCf .. \
	  ../akfquiz-$(VERSION).bin.$(SYS).$(ARCH).tar.gz \
	      akfquiz/start \
	      akfquiz/doc/english/INSTALL \
	      akfquiz/doc/deutsch/INSTALL \
	      akfquiz/doc/COPYING \
	      akfquiz/doc/english/LICENSE.txt \
	      akfquiz/doc/deutsch/LIZENZ.txt \
	      akfquiz/srcbin/mkquiz \
	      akfquiz/srcbin/scrquiz \
	      akfquiz/srcbin/cgiquiz \
	      akfquiz/srcbin/diaquiz \
	      akfquiz/srcbin/linequiz \
	      akfquiz/srcbin/quizstat \
	      akfquiz/srcbin/akfquiz

# needs makensis
dist-windows: html pdf
	$(MAKE) -C srcbin veryclean
	# export and convert textfiles
	cp doc/COPYING srcbin/w32/COPYING.txt
	cp doc/deutsch/COPYING.de srcbin/w32/COPYING.de.txt
	cp share/akfquiz/*.akfquiz srcbin/w32/
	-cp ../unfree/*.akfquiz srcbin/w32/
	-unix2dos srcbin/w32/*.txt
	-unix2dos srcbin/w32/*.akfquiz
	makensis srcbin/w32/akfquiz.nsi

FORCE:
